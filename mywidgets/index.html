<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
    <title>Range selector</title>

    <script type="text/javascript" src="../d3/d3.js"></script>
    <script type="text/javascript" src="selector.js"></script>

    <style type="text/css">

        .diagram {
            fill: none;
        }

        .area {
            stroke: blue;
        }

        .selection {
            stroke: green;
            stroke-opacity: 0.3;
            fill: green;
            fill-opacity: 0.1;
        }

        .limit {
            stroke: none;
            fill: green;
        }

    </style>
</head>
<body>

    <ul>
        <li>You can drag the triangles to modify the selection</li>
        <li>You can drag the selected area if there's room</li>
    </ul>

    <div id="selector"></div>
    <div id="range"></div>

    <script type="text/javascript">

        function format(num, digits, decimals) {
            var str = num.toFixed(decimals);
            while (str.length < digits+decimals+1) {
                str = "0" + str;
            }
            return str;
        }

        var x = 20,
            y = 20,
            h = 150,
            w = 500;

        var diagram = d3.select("#selector").append("svg")
                        .attr("class", "diagram")
                        .attr("width", 600)
                        .attr("height", 200);

        var area = diagram.append("rect")
                          .attr("class", "area")
                          .attr("x", x)
                          .attr("y", y)
                          .attr("width", w)
                          .attr("height", h);

        var selector = make_selector(diagram, x, y, w, h, {
            b: 10,
            range: [0, 100],
            callback: function (l, r) {
                l = format(l, 3, 3);
                r = format(r, 3, 3);
                d3.select("#range").text(l + " " + r);
            }
        });

    </script>

</body>
</html>